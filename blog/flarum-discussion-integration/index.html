<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-9VCB7M8KFM"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9VCB7M8KFM")</script><link rel=stylesheet href=/main.568d041fc4cd80ef2f40f614591cd4edce13e9a07325a64d67ebd0cc9a6074daef6c901632a7b7163cc23fa99339b7d5ef55b8329dfa6fc5003554242a140bdd.css integrity="sha512-Vo0EH8TNgO8vQPYUWRzU7c4T6aBzJaZNZ+vQzJpgdNrvbJAWMqe3FjzCP6mTObfV71W4Mp36b8UANVQkKhQL3Q==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Flarum Discussion Integration - Texera</title><meta name=description content="Motivation # As a platform to support collaborative data science, Texera needs an online forum that allows users to post issues, help each other, and discover new topics. We implemented this feature using Flarum, one of the popular open-source solutions available on GitHub. Supported and maintained by a large community of developers, Flarum has been well received due to its modern design, user-friendly interface, and minimal core with high extensibility."><link rel=canonical href=/blog/flarum-discussion-integration/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Flarum Discussion Integration"><meta property="og:description" content="Motivation # As a platform to support collaborative data science, Texera needs an online forum that allows users to post issues, help each other, and discover new topics. We implemented this feature using Flarum, one of the popular open-source solutions available on GitHub. Supported and maintained by a large community of developers, Flarum has been well received due to its modern design, user-friendly interface, and minimal core with high extensibility."><meta property="og:url" content="/blog/flarum-discussion-integration/"><meta property="og:site_name" content="Texera"><meta property="article:published_time" content="2024-01-08T15:13:54-08:00"><meta property="article:modified_time" content="2024-01-08T15:13:54-08:00"><meta property="og:image" content="/blog/flarum-discussion-integration/flarum-discussion-integration.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Flarum Discussion Integration"><meta name=twitter:description content><meta name=twitter:image content="/blog/flarum-discussion-integration/flarum-discussion-integration.jpg"><meta name=twitter:image:alt content="Flarum Discussion Integration"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"/#/schema/organization/1","name":"Texera","url":"/","sameAs":["https://github.com/texera/texera"],"logo":{"@type":"ImageObject","@id":"/#/schema/image/1","url":"/logo-doks.png","width":512,"height":512,"caption":"Texera"},"image":{"@id":"/#/schema/image/1"}},{"@type":"WebSite","@id":"/#/schema/website/1","url":"/","name":"Texera","description":"Texera is a system to support collaborative, ML-centric data analytics as a cloud-based service using GUI-based workflows. It supports scalable computation with a parallel backend engine, and enables advanced AI\/ML techniques.","publisher":{"@id":"/#/schema/organization/1"}},{"@type":"WebPage","@id":"/blog/flarum-discussion-integration/","url":"/blog/flarum-discussion-integration/","name":"Flarum Discussion Integration","description":"","isPartOf":{"@id":"/#/schema/website/1"},"about":{"@id":"/#/schema/organization/1"},"datePublished":"2024-01-08T15:13:54CET","dateModified":"2024-01-08T15:13:54CET","breadcrumb":{"@id":"/blog/flarum-discussion-integration/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"/blog/flarum-discussion-integration/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["/blog/flarum-discussion-integration/"]}]},{"@type":"BreadcrumbList","@id":"/blog/flarum-discussion-integration/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"","url":"","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"/blog/","url":"/blog/","name":"Blog"}},{"@type":"ListItem","position":4,"item":{"@id":"/blog/flarum-discussion-integration/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"/#/schema/article/1","headline":"Flarum Discussion Integration","description":"","isPartOf":{"@id":"/blog/flarum-discussion-integration/"},"mainEntityOfPage":{"@id":"/blog/flarum-discussion-integration/"},"datePublished":"2024-01-08T15:13:54CET","dateModified":"2024-01-08T15:13:54CET","author":{"@id":"/#/schema/person/2"},"publisher":{"@id":"/#/schema/organization/1"},"image":{"@id":"/blog/flarum-discussion-integration/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"/#/schema/person/2","name":"Texera Team","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"/blog/flarum-discussion-integration/#/schema/image/2","url":"doks.png","contentUrl":"doks.png","caption":"Flarum Discussion Integration"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=site.webmanifest></head><body class="blog single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Texera>Texera</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Texera</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/blog/>Blog</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=/https:/github.com/Texera/texera><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div></nav></header><div class="wrap container-fluid" role=document><div class=content><div class="row justify-content-center"><div class="col-md-12 col-lg-10 col-xl-8"><article><div class=blog-header><h1>Flarum Discussion Integration</h1><p><small>Posted January 8, 2024
by
<a class="stretched-link position-relative" href=/contributors/yiqun-du/>Yiqun Du</a>
,
<a class="stretched-link position-relative" href=/contributors/henry-liu/>Henry Liu</a>
and
<a class="stretched-link position-relative" href=/contributors/xinyuan-liu/>Xinyuan Liu</a>
from
<a class="stretched-link position-relative" href=/affiliations/uc-irvine/>UC Irvine</a>
&nbsp;&dash;&nbsp;
<strong>5&nbsp;min read</strong></small><p></div><p class=lead>In this blog, we discuss how we support an online forum in Texera using Flarum</p><h2 id=motivation>Motivation <a href=#motivation class=anchor aria-hidden=true>#</a></h2><p>As a platform to support collaborative data science, Texera needs an online forum that allows users to post issues, help each other, and discover new topics. We implemented this feature using Flarum, one of the popular open-source solutions available on GitHub. Supported and maintained by a large community of developers, Flarum has been well received due to its modern design, user-friendly interface, and minimal core with high extensibility.</p><h2 id=challenges>Challenges <a href=#challenges class=anchor aria-hidden=true>#</a></h2><p>There were two main challenges:</p><ul><li>The user management and authentication of Flarum need to be synchronized with the counterparts of Texera. In particular:<ul><li>When a user logs into Texera, they should be be able to make posts in the discussion forum under that account</li><li>When a new user registers in Texera and logs in, the forum needs to recognize that and allow the user to make posts under that account</li><li>A user can only access the forum after logging into Texera. If the user is deleted, they should not be able to access the forum.</li></ul></li><li>Server of Flarum:<ul><li>Written in PHP and Javascript (with Typescript), Flarum can only be hosted on Apache2 (httpd) or nginx. Texera is hosted on Dropwizard in a production environment. Introducing a new web server adds complexity to the system.</li></ul></li></ul><h2 id=solution>Solution <a href=#solution class=anchor aria-hidden=true>#</a></h2><ul><li>We support the synchronization of the user information between the main Texera system and the Flarum system, including account creation and authentication.</li><li>We chose Apache2 server to host the Flarum discussion forum.</li><li>We wrote scripts to support auto setup of the forum on Windows, Mac OS, and Ubuntu for deployment.</li></ul><h3 id=1-user-autoauthentication>1. <strong>User Autoauthentication</strong>: <a href=#1-user-autoauthentication class=anchor aria-hidden=true>#</a></h3><p>Flarum runs as a microservice separately from the main parts of Texera. It provides several endpoints to support consistency between the users in Flarum and the main Texera.</p><figure align=center style=width:100%;max-width:none><a href=auth1.png><img src=auth1.png alt style=width:100%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 1.</b> When a user logs into Texera, the angular frontend calls the login endpoints of Texera and Flarum separately to ensure users are logged in on both sides. When a user registers in Texera, Texera adds the user in Flarum as well.</i></figcaption></figure><h3 id=2-server-of-flarum>2. <strong>Server of Flarum</strong>: <a href=#2-server-of-flarum class=anchor aria-hidden=true>#</a></h3><figure align=center style=width:100%;max-width:none><a href=before_after.png><img src=before_after.png alt style="width:100 %"></a><figcaption align=center style=font-size:1.2em><i><b>Figure 2.</b> We run flarum on the proxy server.</i></figcaption></figure><h3 id=3-installation-scripts>3. <strong>Installation scripts</strong>: <a href=#3-installation-scripts class=anchor aria-hidden=true>#</a></h3><p style=font-size:1.2em>We wrote bash and powershell scripts to automatically install and configure Flarum to do the following:<ul><li>install Apache2, PHP, and composer (the package manager for PHP)</li><li>create a Flarum directory with composer and provide configurations for Flarum</li><li>set up the MySQL database for Flarum</li><li>configure the apache2 server</li><li>restart the server to run the Flarum application</li></ul><h2 id=features>Features <a href=#features class=anchor aria-hidden=true>#</a></h2><p>The discussion forum includes the following features:</p><ul><li><p>Flarum built-in Features:</p><ul><li>post creation:<ul><li>Users can create discussions with tags, create posts within discussions, and reply to posts</li></ul></li><li>Search:<ul><li>Users can search in discussions</li><li>A drop-down menu displays options for sorting discussions (e.g., latest, oldest, popular)</li></ul></li><li>Admin:<ul><li>Admins can toggle on and off different extensions</li><li>Admins can assign privileges to different groups and users</li><li>Admins can change settings for the whole forum</li></ul></li><li>Users can &ldquo;like&rdquo; posts and see how many likes a post receives</li></ul></li><li><p>New features implemented by us:</p><ul><li>Auto-authentication: When a user logs into Texera, the same user will be logged in automatically in the discussion forum as well</li><li>Auto-account synchronization: When a new user registers and logs into Texera, the same new user account will appear in the discussion forum</li></ul></li></ul><p>Extensions:</p><ul><li>fof/byobu (private discussions): Certain users with privileges can create private discussions that are only visible to a selected group of users</li><li>michaelbelgium/flarum-discussion-views: Users can see the view count and post count of every discussion.</li></ul><h2 id=demonstrations>Demonstrations <a href=#demonstrations class=anchor aria-hidden=true>#</a></h2><h3 id=1-user-autoauthentication-1>1. <strong>User Autoauthentication</strong>: <a href=#1-user-autoauthentication-1 class=anchor aria-hidden=true>#</a></h3><p>As shown below, when a user logs into Texera, the user will also log in on the discussion forum site.</p><figure align=center style=width:100%;max-width:none><a href=user-sych.gif><img src=user-sych.gif alt style=width:100%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 3.</b> user logs into Texera.</i></figcaption></figure><h3 id=2-create-a-discussion-make-posts-and-reply-to-posts>2. <strong>Create a discussion, make posts, and reply to posts</strong>: <a href=#2-create-a-discussion-make-posts-and-reply-to-posts class=anchor aria-hidden=true>#</a></h3><p>The following image shows how a discussion/post is created here. Users can add tags to a post, such as &ldquo;General.&rdquo;</p><figure align=center style=width:100%;max-width:none><a href=make-a-basic-post.gif><img src=make-a-basic-post.gif alt style=width:100%></a><figcaption align=center style=font-size:1.2em><b>Figure 4.</b> A user creates a dicussion and publishes the first post.</i></figcaption></figure><figure align=center style=width:100%;max-width:none><a href=reply1.png><img src=reply1.png alt style=width:200%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 5.</b> A reply button under each post</i></figcaption></figure><figure align=center style=width:100%;max-width:none><a href=reply2.png><img src=reply2.png alt style=width:100%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 6.</b> The composer view of the reply</i></figcaption></figure><h3 id=3-create-a-private-discussion>3. <strong>Create a private discussion</strong>: <a href=#3-create-a-private-discussion class=anchor aria-hidden=true>#</a></h3><p>Users with certain privileges can create private discussions that are only visible to a selected group of users</p><figure align=center style=width:100%;max-width:none><a href=private-discus.gif><img src=private-discus.gif alt style=width:100%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 7.</b> A user creates a private discussion under a separate tab and chooses the users/groups for this discussion</i></figcaption></figure><h3 id=4-admin-features>4. <strong>Admin features</strong>: <a href=#4-admin-features class=anchor aria-hidden=true>#</a></h3><p>The discussion feature of Texera can be managed and maintained through the Flarum forum admin page. An admin has various privileges, such as managing user accounts, management of extensions, and giving privileges to users.</p><figure align=center style=width:100%;max-width:none><a href=admin.gif><img src=admin.gif alt style=width:100%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 8.</b></i></figcaption></figure><h3 id=5-view-and-reply-count>5. <strong>View and reply count</strong>: <a href=#5-view-and-reply-count class=anchor aria-hidden=true>#</a></h3><figure align=center style=width:100%;max-width:none><a href=flarum-view-count.png><img src=flarum-view-count.png alt style=width:100%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 9.</b> The number of views and replies for each dicussion</i></figcaption></figure><h3 id=6other-features>6.<strong>Other features</strong>: <a href=#6other-features class=anchor aria-hidden=true>#</a></h3><figure align=center style=display:inline-block;width:49%><a href=searchbar.png><img src=searchbar.png alt style=width:90%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 10.</b> Full-text search allows users to search relevant posts</i></figcaption></figure><figure align=center style=display:inline-block;width:49%><a href=dropdown.png><img src=dropdown.png alt style=width:60%></a><figcaption align=center style=font-size:1.2em><i><b>Figure 11.</b> Search results sorted based on different options</i></figcaption></figure><h2 id=future-improvement-to-support-mentions>Future improvement to support &lsquo;Mentions&rsquo;: <a href=#future-improvement-to-support-mentions class=anchor aria-hidden=true>#</a></h2><p>When a user types in the &ldquo;AT&rdquo; character (@), we want to automatically show related resources such as users, workflows, projects, data sets, etc. We call this feature &ldquo;mentions.&rdquo; There is a &ldquo;mentions&rdquo; extension already included when we use composer to create the Flarum directory, which can do the following:</p><ul><li>mentioning of users and groups</li><li>mentioning of posts used in post replies</li></ul><p>We will use this extension to implement the feature. One challenge is related to how to synchronize the resources in the MySQL database of Texera and the MySQL database of Flarum.</p></article></div></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.576fdb91cfd303e8fc247b90cc678e7d3304777de963077ad78eb70811a476919edaebf1d2843057250ec536b7ed1bd40f4e48f06e7cfc9c569dcf7581afd08b.js integrity="sha512-V2/bkc/TA+j8JHuQzGeOfTMEd33pYwd61463CBGkdpGe2uvx0oQwVyUOxTa37RvUD05I8G58/JxWnc91ga/Qiw==" crossorigin=anonymous defer></script>
<script src=/main.min.0382ba481d9dbcd1dd4c82111208ebf5d7eda2fce9378b0b14257d7f117c79f8ae01591f6ad0a99917b4e1624d8ace90de964e2431ab237000161ebd3c3dad63.js integrity="sha512-A4K6SB2dvNHdTIIREgjr9dftovzpN4sLFCV9fxF8efiuAVkfatCpmRe04WJNis6Q3pZOJDGrI3AAFh69PD2tYw==" crossorigin=anonymous defer></script></body></html>