<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.1e8058b1b58c79355cb7bc494b90ffa45e25ddfea553a0a2482c5b5e5fdd006f560783741925f2ce785f9151275822398e47f5f643ce71008e91feb741a22911.css integrity="sha512-HoBYsbWMeTVct7xJS5D/pF4l3f6lU6CiSCxbXl/dAG9WB4N0GSXyznhfkVEnWCI5jkf19kPOcQCOkf63QaIpEQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Showing Changes Between Two Workflow Versions - Texera</title><meta name=description content="Texera has a version control system that automatically saves workflow versions so that users can easily view or restore early versions. The current implementation only shows each historical workflow. Users may find it hard to see how it differs from another workflow version, especially when there is only a tiny change. We want to improve the usability of the version control system by visually displaying the difference between two workflow versions."><link rel=canonical href=/blog/showing-changes-between-two-workflow-versions/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Showing Changes Between Two Workflow Versions"><meta property="og:description" content="Texera has a version control system that automatically saves workflow versions so that users can easily view or restore early versions. The current implementation only shows each historical workflow. Users may find it hard to see how it differs from another workflow version, especially when there is only a tiny change. We want to improve the usability of the version control system by visually displaying the difference between two workflow versions."><meta property="og:url" content="/blog/showing-changes-between-two-workflow-versions/"><meta property="og:site_name" content="Texera"><meta property="article:published_time" content="2022-09-22T15:16:36-07:00"><meta property="article:modified_time" content="2022-09-22T15:16:36-07:00"><meta property="og:image" content="doks.png"><meta property="og:image:alt" content="Texera"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Showing Changes Between Two Workflow Versions"><meta name=twitter:description content><meta name=twitter:image content="doks.png"><meta name=twitter:image:alt content="Showing Changes Between Two Workflow Versions"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"/#/schema/organization/1","name":"Texera","url":"/","sameAs":["https://github.com/texera/texera"],"logo":{"@type":"ImageObject","@id":"/#/schema/image/1","url":"/logo-doks.png","width":512,"height":512,"caption":"Texera"},"image":{"@id":"/#/schema/image/1"}},{"@type":"WebSite","@id":"/#/schema/website/1","url":"/","name":"Texera","description":"Texera is a system to support collaborative, ML-centric data analytics as a cloud-based service using GUI-based workflows. It supports scalable computation with a parallel backend engine, and enables advanced AI\/ML techniques.","publisher":{"@id":"/#/schema/organization/1"}},{"@type":"WebPage","@id":"/blog/showing-changes-between-two-workflow-versions/","url":"/blog/showing-changes-between-two-workflow-versions/","name":"Showing Changes Between Two Workflow Versions","description":"","isPartOf":{"@id":"/#/schema/website/1"},"about":{"@id":"/#/schema/organization/1"},"datePublished":"2022-09-22T15:16:36CET","dateModified":"2022-09-22T15:16:36CET","breadcrumb":{"@id":"/blog/showing-changes-between-two-workflow-versions/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"/blog/showing-changes-between-two-workflow-versions/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["/blog/showing-changes-between-two-workflow-versions/"]}]},{"@type":"BreadcrumbList","@id":"/blog/showing-changes-between-two-workflow-versions/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"","url":"","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"/blog/","url":"/blog/","name":"Blog"}},{"@type":"ListItem","position":4,"item":{"@id":"/blog/showing-changes-between-two-workflow-versions/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"/#/schema/article/1","headline":"Showing Changes Between Two Workflow Versions","description":"","isPartOf":{"@id":"/blog/showing-changes-between-two-workflow-versions/"},"mainEntityOfPage":{"@id":"/blog/showing-changes-between-two-workflow-versions/"},"datePublished":"2022-09-22T15:16:36CET","dateModified":"2022-09-22T15:16:36CET","author":{"@id":"/#/schema/person/2"},"publisher":{"@id":"/#/schema/organization/1"},"image":{"@id":"/blog/showing-changes-between-two-workflow-versions/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"/#/schema/person/2","name":"Texera Team","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"/blog/showing-changes-between-two-workflow-versions/#/schema/image/2","url":"doks.png","contentUrl":"doks.png","caption":"Showing Changes Between Two Workflow Versions"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=site.webmanifest></head><body class="blog single"><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Texera>Texera</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Texera</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/blog/>Blog</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=/https:/github.com/h-enk/doks><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/https:/twitter.com/getdoks><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><small class="ms-2 d-md-none">Twitter</small></a></li></ul></div></div></nav></header><div class="wrap container-fluid" role=document><div class=content><div class="row justify-content-center"><div class="col-md-12 col-lg-10 col-xl-8"><article><div class=blog-header><h1>Showing Changes Between Two Workflow Versions</h1><p><small>Posted September 22, 2022 by <a class="stretched-link position-relative" href=/contributors/jingqi-yao/>Jingqi Yao</a>&nbsp;&dash;&nbsp;<strong>4&nbsp;min read</strong></small><p></div><p class=lead>We discuss how to display the differences between two workflow versions in Texera.</p><p>Texera has a version control system that automatically saves workflow versions so that users can easily view or restore early versions. The current implementation only shows each historical workflow. Users may find it hard to see how it differs from another workflow version, especially when there is only a tiny change. We want to improve the usability of the version control system by visually displaying the difference between two workflow versions.</p><h3 id=task-overview>Task Overview <a href=#task-overview class=anchor aria-hidden=true>#</a></h3><p>The task can be divided into two phases: calculating and showing the differences between two workflow versions.</p><p>In this task, we are showing all differences in an aggregated style (i.e., only displaying the historical version of workflow and highlighting the changes with respect to the current version). Although showing both versions side-by-side with highlights might better display the changes, the current Texera system does not support displaying two workflows simultaneously. Showing workflow differences in two windows is left for future enhancement.</p><p>To keep the user interface neat, we are only showing the differences of operators, while similar logic can be applied to other elements in the workflow, e.g., links and comment boxes. For simplicity of the user interface, operators&rsquo; position changes are not considered for now.</p><h3 id=an-example>An Example <a href=#an-example class=anchor aria-hidden=true>#</a></h3><p>The following is a current workflow:</p><img src=current_workflow.png width=700><p>When the user selects Version #3 on the list on the right (highlighted in red), we retrieve the version from the history and highlight the differences. In this example, the Regular Expression operator was deleted in the current version, the Filter operator was added, and the &ldquo;Worker count&rdquo; property of the Python UDF is changed from 1.</p><img src=historical_workflow.png width=700><h3 id=implementation>Implementation <a href=#implementation class=anchor aria-hidden=true>#</a></h3><p>Once the user selects a particular version, we calculate the difference between that version and the current version and highlight their differences.</p><h4 id=calculating-the-differences>Calculating the Differences <a href=#calculating-the-differences class=anchor aria-hidden=true>#</a></h4><p>The <code>getWorkflowsDifference</code> function takes two workflow objects and returns all the IDs of operators that are different in the two versions.</p><p>For each operator, the change can be categorized into three types:</p><ul><li><strong>Added</strong>: the operator is added by the user;</li><li><strong>Modified</strong>: the operator&rsquo;s properties are modified;</li><li><strong>Deleted</strong>: the operator is deleted.</li></ul><p>To facilitate later comparisons, we create a map for each version, with an operatorID as the key, and the operator&rsquo;s properties as the value. Then we run two passes on the map.</p><ol><li><p>In the first pass, we iterate through the operators of the historical version. Our goal is to find the added and modified operators. To find the added operators, we simply check if the operatorID exists in the map of the current version. If the operatorID exists in both versions, we then perform a deep comparison of the two operators&rsquo; properties associated with the operatorID using the <code>isEqual()</code> method from <code>lodash</code>, a JavaScript utility library. If they are different, we add the operatorID to the list of modified operators.</p></li><li><p>In the second pass, we iterate through the operators of the current version to generate a list of operators that are deleted.</p></li></ol><p>So far, we have obtained all the IDs of operators that have been added, modified, or deleted between the two versions.</p><h4 id=highlighting-the-differences>Highlighting the Differences <a href=#highlighting-the-differences class=anchor aria-hidden=true>#</a></h4><p>We only display the historical version on the user interface, and all differences should be visible on one canvas.</p><p>For deleted and modified operators, we simply fill the <code>rect.boundary</code> attribute of the operator to give the operators a highlighted background. We use green to indicate deletion and orange to indicate modification. Furthermore, we highlight the outline of modified properties in the property window on the right-hand side.</p><p>However, we cannot do the same for the added operators because they do not exist in the historical version we are displaying. Instead, we put brackets on the connected operators to indicate that there are additional operators between them in the current version.</p><p align=center><img src=highlight_meaning.png width=500></p><h3 id=summary>Summary <a href=#summary class=anchor aria-hidden=true>#</a></h3><p>In this blog, we share how we visually display the differences between the workflows in the Texera version control system. This enhancement would improve the usability of the current version control system and help users to view and restore the right version they want.</p><h4 id=acknowledgements>Acknowledgements <a href=#acknowledgements class=anchor aria-hidden=true>#</a></h4><p>Thanks to Sadeem Alsudais, Professor Chen Li, and the Texera team, for their help in the task and this blog.</p></article></div></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.0a0106334435d4110713bfaff4acaf02533b0c56d44412a74e9518db07672ddb7e099a9c7517bc9cb529e2ddd4ae2e438b40b720288900d5e74fb6d8928d9097.js integrity="sha512-CgEGM0Q11BEHE7+v9KyvAlM7DFbURBKnTpUY2wdnLdt+CZqcdRe8nLUp4t3Uri5Di0C3ICiJANXnT7bYko2Qlw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.576fdb91cfd303e8fc247b90cc678e7d3304777de963077ad78eb70811a476919edaebf1d2843057250ec536b7ed1bd40f4e48f06e7cfc9c569dcf7581afd08b.js integrity="sha512-V2/bkc/TA+j8JHuQzGeOfTMEd33pYwd61463CBGkdpGe2uvx0oQwVyUOxTa37RvUD05I8G58/JxWnc91ga/Qiw==" crossorigin=anonymous defer></script>
<script src=/main.min.0382ba481d9dbcd1dd4c82111208ebf5d7eda2fce9378b0b14257d7f117c79f8ae01591f6ad0a99917b4e1624d8ace90de964e2431ab237000161ebd3c3dad63.js integrity="sha512-A4K6SB2dvNHdTIIREgjr9dftovzpN4sLFCV9fxF8efiuAVkfatCpmRe04WJNis6Q3pZOJDGrI3AAFh69PD2tYw==" crossorigin=anonymous defer></script></body></html>